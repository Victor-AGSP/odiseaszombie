/* Styles for the in-game window (isolated, does not touch menu styles) */
.gw-root {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(3,8,12,0.65);
  z-index: 2000;
  padding: 1rem;
}

.gw-window {
  width: 100%;
  max-width: 1100px;
  height: 80vh;
  background: linear-gradient(180deg, rgba(12,18,22,0.98), rgba(6,10,14,0.95));
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 12px 40px rgba(2,6,23,0.7);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.gw-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
}

.gw-title {
  color: #f7fafc;
  font-weight: 700;
}

.gw-close {
  background: transparent;
  border: none;
  color: #f7fafc;
  font-size: 1.1rem;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
}

.gw-body {
  display: flex;
  gap: 1rem;
/* allow absolute-positioned floating controls inside */
.gw-window { position: relative }
  padding: 1rem;
  flex: 1 1 auto;
}

.gw-board {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  flex: 1 1 auto;
  align-items: stretch;
}

.gw-opponent, .gw-player {
  width: 18%;
  display:flex;
  align-items:center;
  justify-content:center;
}

.gw-center { flex: 1; display:flex; flex-direction:column; gap:1rem }

.deck-area { display:flex; gap:0.8rem; align-items:center }
.deck-stack { position:relative }
.deck-card { width:72px; height:96px; border-radius:8px; background:linear-gradient(180deg,#081016,#041012); display:flex; align-items:center; justify-content:center; font-size:1.6rem; box-shadow:0 10px 28px rgba(0,0,0,0.6); position:relative }
.deck-card::before{content:'';position:absolute;inset:6px;border-radius:6px;background:linear-gradient(180deg,#06202a,#041018);opacity:0.9}
.deck-count { position:absolute; right:-8px; bottom:-10px; background:rgba(255,255,255,0.04); padding:4px 8px; border-radius:10px; font-weight:800 }

/* stacked deck visual: show small offsets */
.deck-stack::before,.deck-stack::after{content:'';position:absolute;left:6px;top:6px;width:72px;height:96px;border-radius:8px;background:linear-gradient(180deg,#071316,#041012);box-shadow:0 6px 18px rgba(0,0,0,0.35);transform:translate3d(-6px,6px,0);opacity:0.85}
.deck-stack::after{transform:translate3d(-10px,10px,0);opacity:0.7}
.draw-btn { padding:6px 10px; border-radius:6px; background:linear-gradient(180deg,#2b8ba8,#1f6f86); border:none; color:white; cursor:pointer }
.discard { opacity:0.8; font-size:0.9rem }

.table-area { background:rgba(255,255,255,0.01); border-radius:8px; padding:1rem; min-height:160px; display:flex; align-items:center; justify-content:center }
.table-placeholder { color:rgba(255,255,255,0.6) }

.opponent-area, .player-area { color: #ffdede; font-weight:600 }

.gw-body {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.hand-label { color: rgba(255,255,255,0.85); font-weight:700; margin-left:0.4rem }
.hand-area { display:flex; gap: -40px; justify-content:center; padding:0.6rem; transform: translateY(0); }
.hand-area > * { margin: 0 -28px; }

.gw-footer {
  padding: 0.6rem 1rem;
  text-align: right;
  font-size: 0.85rem;
  color: rgba(255,255,255,0.6);
  border-top: 1px solid rgba(255,255,255,0.02);
}

/* Top-left small HUD: dias / zombies */
.gw-overlay-stats {
  position: absolute;
  left: 1.5rem;
  top: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  z-index: 2100;
}
.stats-box {
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.04);
  padding: 0.45rem 0.6rem;
  border-radius: 8px;
  color: #eaf5ff;
  font-size: 0.85rem;
  display:flex; flex-direction:column; align-items:center; gap:0.15rem;
}
.stat-value { font-weight:800; font-size:1.1rem }

/* Board layout specifics */
.gw-board { display:flex; gap: 1rem; padding: 0.8rem; min-height: 0 }
.table-column { flex: 1 1 auto; display:flex; flex-direction:column; gap:0.6rem; min-width: 0; min-height: 0 }
.side-column { display: none }
.left-column { display:none }
.gw-opponent, .gw-player { width: 22%; display:flex; flex-direction:column; gap:0.6rem }
.gw-center { flex:1; display:flex; gap:1rem; align-items:flex-start }
.deck-area { display:flex; flex-direction:column; align-items:center; gap:0.6rem }
.deck-stack { position:relative; }
.deck-card { width:72px; height:96px; border-radius:8px; background:linear-gradient(180deg,#0b0f11,#071014); display:flex; align-items:center; justify-content:center; font-size:1.6rem; }
.deck-count { position:absolute; right:-8px; bottom:-10px; background:rgba(255,255,255,0.04); padding:4px 8px; border-radius:10px; font-weight:800 }
.draw-btn { padding: 0.45rem 0.7rem; border-radius:8px; background:linear-gradient(180deg,#16343b,#0e2326); color:#e8f6f7; border:none; cursor:pointer }

/* Deck HUD (placed under the small HUD at top-left) */
.deck-hud { display:flex; gap:0.6rem; align-items:center }
.deck-hud .deck-stack { width:72px }
.deck-hud .deck-controls { display:flex; flex-direction:column; gap:6px; align-items:flex-start }
.deck-hud .discard { font-size:0.85rem; opacity:0.9 }

.table-cards { display:flex; gap:0.6rem; align-items:flex-start; flex-wrap: wrap }
/* table layout: allow multiple rows and wrap */
.table-cards { position:relative; display:flex; align-items:flex-start; justify-content:flex-start }
.table-slot { width: 120px; height: 160px; display:inline-block; position:relative; will-change:transform; margin:8px }
.table-slot .card-root { transform-origin: center center }

/* Pan container for table: allows dragging the inner strip */
.table-pan { overflow: hidden; width: 100%; display:flex; flex-direction:column; justify-content:flex-start; align-items:stretch; cursor: grab; flex: 1 1 auto; min-height: 0 }
.table-pan.grabbing { cursor: grabbing }
.table-pan-inner { will-change: transform; transition: transform 120ms linear; min-height: 0; flex: 1 1 auto; display:flex; align-items:stretch }
.table-cards { flex: 1 1 auto; height: 100%; align-items:flex-start; display:flex; flex-wrap:wrap }

/* Floating controls (top-right) */
.floating-controls { position: absolute; right: 12px; top: 56px; z-index: 2200; display:flex; gap:0.5rem; padding:0.5rem; background: rgba(6,8,10,0.55); border-radius:8px; border:1px solid rgba(255,255,255,0.03) }
.floating-controls button { padding:0.45rem 0.6rem; border-radius:6px; border:none; background:linear-gradient(180deg,#2b6b7a,#15363a); color:#e8fbff; cursor:pointer }

/* Team bar at the bottom: centered */
.team-bar {
  position: absolute;
  left: 50%;
  bottom: 12px;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 0.75rem;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(8,10,12,0.6), rgba(6,8,10,0.5));
  border: 1px solid rgba(255,255,255,0.035);
  box-shadow: 0 10px 30px rgba(2,6,12,0.6);
  width: min(92%, 920px);
  z-index: 2400;
  pointer-events: auto;
}
.team-sections { display:flex; gap:12px; align-items:center; width:100% }
.team-equipo { flex: 1 1 auto; display:flex; flex-direction:column; align-items:center; justify-content:center }
.team-side-slots { display:flex; flex-direction:row; gap:20px; width:auto; align-items:center; margin-left: 12px }
.team-side-slots { display:flex; flex-direction:row; gap:20px; width:auto; align-items:center; justify-content:flex-end }
.team-slot { background: rgba(255,255,255,0.02); border-radius:8px; padding:8px; display:flex; flex-direction:column; align-items:center; min-height: 120px; min-width: 132px }
.slot-body { display:flex; align-items:center; justify-content:center; width:100%; height:100% }
.empty-slot { color: rgba(255,255,255,0.28); font-size:20px }
.team-equipo .hand-area { padding: 6px 0; }
.team-bar .hand-area { justify-content:center; display:flex; gap:0.6rem; align-items:flex-end; padding:0.25rem 0; pointer-events: auto }

.player-events { margin-top: 0.6rem }
.events-label { font-size:0.85rem; color:#dbeff0; margin-bottom:0.4rem }
.events-list { display:flex; gap:0.4rem }
.event-pill { background: rgba(255,255,255,0.04); padding:6px 8px; border-radius:6px; color:#eef6f7 }

.hand-label { color: #dceff4; font-weight:700; margin-bottom:0.4rem }
.hand-area { display:flex; gap:0.6rem; align-items:flex-end; padding:0.5rem 0 }

/* hand-slot: wrapper so we can animate translation/scale per-card */
.hand-slot { display:inline-block; transition: transform 520ms cubic-bezier(.22,.9,.3,1), box-shadow 420ms ease; will-change: transform; transform-origin: center bottom; transform-style: preserve-3d; }
.hand-slot + .hand-slot { margin-left: -56px }
.hand-slot .card-root { transform-origin: center center; backface-visibility: hidden; }
.hand-slot:hover { /* ensure hovered slot is above siblings */ z-index: 9999 }

/* improve 3d feel when rotating: keep preserve-3d on container */
.hand-area { perspective: 1200px }

/* Mini menu centered above the clicked card */
.card-menu {
  position: fixed;
  z-index: 99999;
  background: linear-gradient(180deg, rgba(10,14,16,0.98), rgba(6,8,10,0.98));
  border: 1px solid rgba(255,255,255,0.04);
  padding: 8px;
  border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  min-width: 160px;
  transform-origin: center bottom;
  /* center above the anchor point (we set left=x center, top=y at card top) */
  transform: translate(-50%, -110%);
}

/* When no hover, keep tight overlap; hovered logic handled inline via style */

.gw-controls { display:flex; gap:0.5rem; margin-top:0.6rem }
.gw-controls button { padding:0.5rem 0.7rem; border-radius:8px; border:none; background:linear-gradient(180deg,#1b3b2f,#0f291f); color:#eaf7ef; cursor:pointer }

.gw-log { margin-left: 1rem; color: #cfeef0 }
.gw-log h4 { margin: 0 0 0.4rem 0; font-size:0.95rem }
.gw-log ul { margin:0; padding:0; list-style:none }
.gw-log li { background: rgba(255,255,255,0.02); margin-bottom:6px; padding:6px 8px; border-radius:6px }

@media (max-width: 900px) {
  .gw-board { flex-direction: column }
  .gw-opponent, .gw-player { width: 100% }
  .gw-log { margin-left: 0; margin-top: 0.6rem }
}

@media (max-width: 720px) {
  .gw-body { flex-direction: column; }
  .gw-left { width: 100%; }
}
