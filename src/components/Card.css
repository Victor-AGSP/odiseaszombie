/* Card component styles: compact, tactile, isolated from global menu styles */
.card-root {
  width: 120px;
  height: 170px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  cursor: pointer;
  user-select: none;
  position: relative;
  transform-style: preserve-3d;
}

.card-root:focus{outline:none}

/* inner element that will rotate/tilt in 3D */
.card-inner{
  position:relative;
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  /* single canonical transition for card inner (kept concise and snappy) */
  transition: transform 360ms cubic-bezier(.22,.9,.3,1), box-shadow 180ms ease;
  /* baseline perspective tilt: top appears further (smaller) than bottom */
  transform-origin: center top;
  transform: rotateX(22deg) translateZ(-2px); /* stronger tilt for more pronounced perspective */
  /* visual styling moved here so border/shadow follow the 3D transform */
  background: linear-gradient(180deg, #0f1315 0%, #061013 100%);
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 8px 30px rgba(2,6,23,0.65), inset 0 -4px 12px rgba(0,0,0,0.45);
  color: #e6eef6;
  display:flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem;
  box-sizing: border-box;
  backface-visibility: hidden;
  will-change: transform;
}

/* Type-specific accents (talento, evento, iniciativa) */
.card-root.talento .card-inner { background: linear-gradient(180deg, #102226 0%, #061a18 100%); }
.card-root.evento .card-inner { background: linear-gradient(180deg, #220f18 0%, #12070a 100%); }
.card-root.iniciativa .card-inner { background: linear-gradient(180deg, #1b1422 0%, #0d0710 100%); border: 1px solid rgba(200,170,100,0.06) }

/* pseudo-element used for outlines (so they transform with the card) */
.card-inner::after{
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  box-sizing: border-box;
  border: 1px solid transparent;
  /* slightly larger Z offset so the outline stays visually above the surface */
  transform: translateZ(3px);
}

.card-face{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;padding:0.5rem;box-sizing:border-box;border-radius:10px;backface-visibility:hidden}
.card-front{z-index:2}
.card-back{transform:rotateY(180deg);background:linear-gradient(180deg,#081017,#05100d);display:flex;align-items:center;justify-content:center}
.card-back-art{font-size:2rem;opacity:0.9}

/* Note: hover/pop straightening intentionally removed to keep cards' baseline perspective.
   Click animations are handled in JS for a custom disappear/reappear effect. */

/* Disable the hover straightening effect for cards that are rendered on the table.
   Table cards should keep the baseline tilted perspective even when hovered. */
.table-cards .card-root:hover .card-inner,
.table-cards .card-root:focus .card-inner,
.table-cards .card-root:active .card-inner,
.table-slot .card-root:hover .card-inner,
.table-slot .card-root:focus .card-inner,
.table-slot .card-root:active .card-inner {
  /* Keep the baseline tilt and original shadow used for non-hover state */
  transform: rotateX(22deg) translateZ(-2px);
  box-shadow: 0 8px 30px rgba(2,6,23,0.65), inset 0 -4px 12px rgba(0,0,0,0.45);
}

/* Smooth return to default tilt when mouse leaves - handled by .card-inner transition above */

/* When a card is the source of a preview animation, keep it visually popped for the duration
   so it doesn't snap back while a clone flies to the modal. The class is added/removed via JS. */
.preview-source .card-inner {
  transform: rotateX(0deg) rotateY(0deg) translateZ(28px) translateY(-2px) !important;
  box-shadow: 0 40px 88px rgba(2,6,23,0.88) !important;
  transition: transform 520ms cubic-bezier(.2,.9,.28,1), box-shadow 320ms ease !important;
}

.card-badge {
  position: absolute;
  left: 8px;
  top: 8px;
  width: 22px;
  height: 22px;
  border-radius: 6px;
  background: rgba(255,255,255,0.04);
  display:flex; align-items:center; justify-content:center; font-weight:700; font-size:0.9rem;
}

.card-risk {
  font-size: 3rem;
  font-weight: 800;
  margin-top: 18px;
  color: #ffe9b3;
  text-shadow: 0 2px 6px rgba(0,0,0,0.6);
}

.card-conflict {
  position: absolute;
  right: 8px;
  top: 8px;
  width: 30px;
  height: 26px;
  border-radius: 6px;
  background: rgba(255,80,80,0.06);
  display:flex; align-items:center; justify-content:center; font-weight:800; color:#ffb0b0;
}

.card-art { margin-top: auto; margin-bottom: 8px; font-size: 1.6rem; opacity: 0.9 }

.card-root.allied .card-inner::after{ border-color: rgba(120,200,180,0.16); box-shadow: 0 0 0 3px rgba(120,200,180,0.03) inset }
.card-root.errant .card-inner{ box-shadow:0 14px 40px rgba(120,40,40,0.32) }

/* Responsive adjustments grouped and ordered from large -> small */
@media (max-width: 920px) {
  /* slightly reduce tilt on medium screens */
  .card-inner { transform: rotateX(16deg) translateZ(-1px) }
}

@media (max-width: 720px) {
  /* further reduce tilt and slightly smaller card size */
  .card-inner { transform: rotateX(10deg) }
  .card-root { width: 100px; height: 150px }
  .card-risk { font-size: 2.2rem }
}

@media (max-width: 420px) {
  /* compact phone sizes */
  .card-inner { transform: rotateX(6deg) }
  .card-root { width: 88px; height: 132px }
  .card-risk { font-size: 1.8rem }
  .card-conflict { font-size: 0.95rem }
  .card-art { font-size: 1.2rem }
}
